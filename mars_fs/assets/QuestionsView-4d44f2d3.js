import{_ as P,r as h,x as q,o as K,a as S,w as C,v as F,b as d,c as w,d as e,y as X,m as _,F as U,e as B,z as Z,n as E,t as M,p as D,j as z,V as g,A as G,L as H,P as ee,h as L,T as se,g as O,S as te,s as W,B as ae,q as Y,f as J}from"./index-a84fb00c.js";import{A as k,S as le}from"./SearchComp-7673306b.js";const R=c=>(D("data-v-fe0ed56e"),c=c(),z(),c),ne={class:"modal"},oe={class:"addNewQuestion"},re=R(()=>e("h1",null,"Add New Question",-1)),ie=["onSubmit"],ue={class:"addNewQuestionForm"},de=R(()=>e("label",null,"Select categories:",-1)),_e={class:"checkbox-list"},ce=["for"],ve=["value","id","error","disabled"],we=R(()=>e("button",{class:"btn-base",type:"submit"},"Submit",-1)),fe={__name:"AddQuestionModal",props:["addQueModalVisibility"],emits:["close","newQuestionAdded"],setup(c,{emit:x}){const b=h([]),t=h({que_text:"",categories:[],answer_correct:"",answer_false1:"",answer_false2:"",answer_false3:""}),o=h({que_text:"",selectedCategories:"",answer_correct:"",answer_false1:"",answer_false2:"",answer_false3:""});async function u(){if(o.value.que_text||o.value.answer_correct||o.value.answer_false1||o.value.answer_false2||o.value.answer_false3)return alert("Please finish the form");try{const s=await k.addNewQuestion({que_text:t.value.que_text.trim(),categories:t.value.categories,answer_correct:t.value.answer_correct.trim(),answer_false1:t.value.answer_false1.trim(),answer_false2:t.value.answer_false2.trim(),answer_false3:t.value.answer_false3.trim()});alert("You've successfuly added new question"),x("close"),x("newQuestionAdded"),t.value.que_text="",t.value.categories=[],t.value.answer_correct="",t.value.answer_false1="",t.value.answer_false2="",t.value.answer_false3=""}catch(s){if(console.log(s),s.response.status===409)return alert("Question already exists")}}function Q(){x("close")}async function a(){try{const s=await k.getAllCategories();b.value=s.data.categories}catch(s){console.error(s.message)}}return q(()=>t.value.que_text,s=>{s&&(o.value.que_text=g.question(s))}),q(()=>t.value.answer_correct,s=>{s&&(o.value.answer_correct=g.answer(s))}),q(()=>t.value.answer_false1,s=>{s&&(o.value.answer_false1=g.answer(s))}),q(()=>t.value.answer_false2,s=>{s&&(o.value.answer_false2=g.answer(s))}),q(()=>t.value.answer_false3,s=>{s&&(o.value.answer_false3=g.answer(s))}),K(()=>{a()}),(s,v)=>{const A=S("BaseTextarea"),V=S("BaseInput");return C((d(),w("div",ne,[e("div",oe,[e("div",{class:"registerTitle"},[e("span",{class:"close",onClick:Q}," ×"),re]),e("form",{onSubmit:X(u,["prevent"])},[e("div",ue,[e("div",null,[_(A,{modelValue:t.value.que_text,"onUpdate:modelValue":v[0]||(v[0]=r=>t.value.que_text=r),label:"Question text",type:"text",required:"",error:o.value.que_text},null,8,["modelValue","error"]),de,e("div",_e,[(d(!0),w(U,null,B(b.value,r=>(d(),w("div",{key:r.id},[e("label",{for:r.cat_id},[C(e("input",{type:"checkbox",value:r.cat_id,id:r.cat_id,"onUpdate:modelValue":v[1]||(v[1]=l=>t.value.categories=l),error:o.value.cat_id,disabled:r.cat_id===23},null,8,ve),[[Z,t.value.categories]]),E(" "+M(r.cat_name),1)],8,ce)]))),128))])]),e("div",null,[_(V,{modelValue:t.value.answer_correct,"onUpdate:modelValue":v[2]||(v[2]=r=>t.value.answer_correct=r),label:"Correct answer",type:"text",error:o.value.answer_correct,required:""},null,8,["modelValue","error"]),_(V,{modelValue:t.value.answer_false1,"onUpdate:modelValue":v[3]||(v[3]=r=>t.value.answer_false1=r),label:"False answer #1",type:"text",error:o.value.answer_false1,required:""},null,8,["modelValue","error"]),_(V,{modelValue:t.value.answer_false2,"onUpdate:modelValue":v[4]||(v[4]=r=>t.value.answer_false2=r),label:"False answer #2",type:"text",error:o.value.answer_false2,required:""},null,8,["modelValue","error"]),_(V,{modelValue:t.value.answer_false3,"onUpdate:modelValue":v[5]||(v[5]=r=>t.value.answer_false3=r),label:"False answer #3",type:"text",error:o.value.answer_false3,required:""},null,8,["modelValue","error"])])]),we],40,ie)])],512)),[[F,c.addQueModalVisibility]])}}},he=P(fe,[["__scopeId","data-v-fe0ed56e"]]);const j=c=>(D("data-v-4bdc577e"),c=c(),z(),c),me={class:"modal"},pe={class:"addNewQuestion"},xe=j(()=>e("h1",null,"Edit Question",-1)),be=["onSubmit"],ye={class:"addNewQuestionForm"},qe=j(()=>e("label",null,"Select categories:",-1)),ge={class:"checkbox-list"},Qe=["value","id","error","disabled"],Ve=["for"],ke=j(()=>e("button",{class:"btn-base",type:"submit"},"Submit",-1)),Ce={__name:"EditQuestionModal",props:["editQueModalVisibility","que_id"],emits:["close","questionEdited"],async setup(c,{emit:x}){let b,t;const o=c,u=h(""),Q=h([]),a=h({}),s=h({que_text:"",selectedCategories:"",answer_correct:"",answer_false1:"",answer_false2:"",answer_false3:""});async function v(){if(s.value.que_text||s.value.answer_correct||s.value.answer_false1||s.value.answer_false2||s.value.answer_false3)return alert("Please finish the form");try{const l=await k.editQuestion({question:{que_text:a.value.question.que_text.trim(),que_id:a.value.question.que_id},categories:a.value.categories,answer_correct:{ans_text:a.value.answer_correct.ans_text.trim(),ans_id:a.value.answer_correct.ans_id},answer_false1:{ans_text:a.value.answer_false1.ans_text.trim(),ans_id:a.value.answer_false1.ans_id},answer_false2:{ans_text:a.value.answer_false2.ans_text.trim(),ans_id:a.value.answer_false2.ans_id},answer_false3:{ans_text:a.value.answer_false3.ans_text.trim(),ans_id:a.value.answer_false3.ans_id}});x("close"),x("questionEdited"),alert("Question is successfully edited!")}catch(l){console.log(l)}}async function A(){try{const l=await k.getQuestionForEdit(o.que_id);u.value=l.data.question[0]}catch(l){console.error(l.message)}}function V(){x("close")}async function r(){try{const l=await k.getAllCategories();Q.value=l.data.categories}catch(l){console.error(l.message)}}return[b,t]=G(()=>r()),await b,t(),[b,t]=G(()=>A()),await b,t(),a.value={question:{que_text:u.value.que_text,que_id:u.value.que_id},categories:u.value.categories,answer_correct:{ans_text:u.value.answers[0].ans_text,ans_id:u.value.answers[0].ans_id},answer_false1:{ans_text:u.value.answers[1].ans_text,ans_id:u.value.answers[1].ans_id},answer_false2:{ans_text:u.value.answers[2].ans_text,ans_id:u.value.answers[2].ans_id},answer_false3:{ans_text:u.value.answers[3].ans_text,ans_id:u.value.answers[3].ans_id}},q(()=>a.value.question.que_text,l=>{l&&(s.value.que_text=g.question(l))}),q(()=>a.value.answer_correct.ans_text,l=>{l&&(s.value.answer_correct=g.answer(l))}),q(()=>a.value.answer_false1.ans_text,l=>{l&&(s.value.answer_false1=g.answer(l))}),q(()=>a.value.answer_false2.ans_text,l=>{l&&(s.value.answer_false2=g.answer(l))}),q(()=>a.value.answer_false3.ans_text,l=>{l&&(s.value.answer_false3=g.answer(l))}),(l,m)=>{const f=S("BaseTextarea"),i=S("BaseInput");return C((d(),w("div",me,[e("div",pe,[e("div",{class:"registerTitle"},[e("span",{class:"close",onClick:V}," ×"),xe]),e("form",{onSubmit:X(v,["prevent"])},[e("div",ye,[e("div",null,[_(f,{modelValue:a.value.question.que_text,"onUpdate:modelValue":m[0]||(m[0]=n=>a.value.question.que_text=n),label:"Question text",type:"text",required:"",error:s.value.que_text},null,8,["modelValue","error"]),qe,e("div",ge,[(d(!0),w(U,null,B(Q.value,n=>(d(),w("div",{key:n.cat_id},[C(e("input",{type:"checkbox",value:n.cat_id,id:n.cat_id,"onUpdate:modelValue":m[1]||(m[1]=T=>a.value.categories=T),error:s.value.cat_id,disabled:n.cat_id===23},null,8,Qe),[[Z,a.value.categories]]),e("label",{for:n.cat_id},M(n.cat_name),9,Ve)]))),128))])]),e("div",null,[_(i,{modelValue:a.value.answer_correct.ans_text,"onUpdate:modelValue":m[2]||(m[2]=n=>a.value.answer_correct.ans_text=n),label:"Correct answer",type:"text",error:s.value.answer_correct,required:""},null,8,["modelValue","error"]),_(i,{modelValue:a.value.answer_false1.ans_text,"onUpdate:modelValue":m[3]||(m[3]=n=>a.value.answer_false1.ans_text=n),label:"False answer #1",type:"text",error:s.value.answer_false1,required:""},null,8,["modelValue","error"]),_(i,{modelValue:a.value.answer_false2.ans_text,"onUpdate:modelValue":m[4]||(m[4]=n=>a.value.answer_false2.ans_text=n),label:"False answer #2",type:"text",error:s.value.answer_false2,required:""},null,8,["modelValue","error"]),_(i,{modelValue:a.value.answer_false3.ans_text,"onUpdate:modelValue":m[5]||(m[5]=n=>a.value.answer_false3.ans_text=n),label:"False answer #3",type:"text",error:s.value.answer_false3,required:""},null,8,["modelValue","error"])])]),ke],40,be)])],512)),[[F,c.editQueModalVisibility]])}}},Ae=P(Ce,[["__scopeId","data-v-4bdc577e"]]);const p=c=>(D("data-v-e65e8937"),c=c(),z(),c),$e={class:"admin-wrapper"},Me={class:"mainAdmin"},Se={class:"back"},Fe={class:"title"},Ue=p(()=>e("h1",null,"Admin Panel - All Questions",-1)),Be={key:0},Ee={key:1},Ne={class:"guide"},Ie=p(()=>e("p",null," The Question Management Dashboard is your comprehensive tool for curating the question database. ",-1)),Te=p(()=>e("h3",null,"Managing Questions",-1)),Le=p(()=>e("ul",null,[e("li",null," Viewing Questions: All questions are listed with their text, answers, and associated categories. "),e("li",null," Delete: Use the switch next to each question to delete it from the system. "),e("li",null,[E(" Edit: Click the pencil icon beside a question to launch the edit modal. Here, you can: "),e("ul",null,[e("li",null,"Modify the question text."),e("li",null,"Change the answers."),e("li",null,"Update the question's categories.")])])],-1)),Pe=p(()=>e("h3",null,"Searching Questions",-1)),De=p(()=>e("ul",null,[e("li",null,"Utilize the search bar to locate questions by their text.")],-1)),ze=p(()=>e("h3",null,"Adding Questions",-1)),Re=p(()=>e("ul",null,[e("li",null," Select the 'Create New Question' button at the top right to open the question modal, identical to the edit modal, to input a new question and its details. ")],-1)),je=p(()=>e("p",null," Note: Edits and deletions will immediately reflect across the platform. ",-1)),Ge=[Ie,Te,Le,Pe,De,ze,Re,je],He={class:"searchResults"},Oe=p(()=>e("tr",null,[e("th"),e("th",null,"Question"),e("th",{class:"hidden unhidden"},"Correct Answer"),e("th",{class:"hidden unhidden"},"False Answer #1"),e("th",{class:"hidden unhidden"},"False Answer #2"),e("th",{class:"hidden unhidden"},"False Answer #3"),e("th",{class:"hidden unhidden"},"Category"),e("th",null,"Delete"),e("th",null,"Edit")],-1)),We=p(()=>e("td",{colspan:"4"}," Oops! We couldn't find any results for that term. Please try a different keyword or phrase. ",-1)),Ye=[We],Je={style:{"white-space":"nowrap"}},Ke={class:"hidden unhidden"},Xe={class:"center"},Ze={class:"switch"},es=["checked","onChange","id","disabled"],ss=5,ts={__name:"QuestionsView",setup(c){const x=h(!1);let b=H.getUser().rol_name;H.id();const t=h([]),o=h("Type in to search..."),u=h(!1),Q=h(!1),a=h(""),s=h(!1);async function v(f){a.value=f,Q.value=!0}const A=h(["rgba(129, 199, 132, 0.7)","rgba(135, 206, 235, 0.7)","rgba(255, 182, 193, 0.7)","rgba(230, 190, 255, 0.7)","rgba(255, 218, 185, 0.7)","rgba(255, 250, 205, 0.7)"]),V=f=>A.value[f%A.value.length];async function r(f){if(f.trim().length<1){l();return}try{const i=await k.searchQuestions(f.trim());t.value=i.data.question}catch(i){console.error(i.message)}}async function l(){try{const f=await k.getAllQuestions();t.value=f.data.questions}catch(f){console.error(f.message)}}async function m(f){try{const i=await k.switchDeleteQ(f);l()}catch(i){console.error(i)}}return K(()=>{l(),x.value=ee.checkPermission(ss)}),(f,i)=>{const n=S("font-awesome-icon"),T=S("RouterLink");return d(),w("div",$e,[e("div",Me,[C(e("div",Se,[_(T,{to:{name:"admin"}},{default:L(()=>[_(n,{icon:["fas","arrow-left-long"],style:{color:"#ffffff"}})]),_:1})],512),[[F,x.value]]),e("div",Fe,[Ue,e("div",{class:"add-new",title:"Add New Question",onClick:i[0]||(i[0]=y=>u.value=!0)}," + ")]),e("h2",{onClick:i[1]||(i[1]=y=>s.value=!s.value)},[E(" Quick Guide for Question Management "),s.value===!1?(d(),w("span",Be,[E(" (click to unhide) "),_(n,{icon:["far","eye"]})])):(d(),w("span",Ee,[E(" (click to hide) "),_(n,{icon:["far","eye-slash"]})]))]),_(se,{name:"fade"},{default:L(()=>[C(e("div",Ne,Ge,512),[[F,s.value]])]),_:1}),_(le,{onSearchTerm:r,placeholder:o.value},null,8,["placeholder"])]),e("div",He,[e("table",null,[Oe,C(e("tr",null,Ye,512),[[F,t.value==null]]),(d(!0),w(U,null,B(t.value,(y,N)=>(d(),w("tr",{key:N,class:W({grey:N%2})},[e("td",Je,M(N+1)+".",1),e("td",null,M(y.que_text),1),(d(!0),w(U,null,B(y.answers,($,I)=>(d(),w("td",{class:"hidden unhidden",key:I},M($.ans_text),1))),128)),e("td",Ke,[(d(!0),w(U,null,B(y.categories,($,I)=>(d(),w("span",{key:I},[$.cat_id!=null?(d(),w("span",{key:0,class:"categoryItem",style:ae({backgroundColor:V(I)})},M($.cat_name),5)):Y("",!0)]))),128))]),e("td",Xe,[e("label",Ze,[e("input",{checked:y.que_is_deleted!==null,onChange:$=>m(y.que_id),type:"checkbox",id:t.value.length+N,disabled:J(b)==="Admin"},null,40,es),e("span",{class:W(["slider",{disabledBtn:J(b)==="Admin"}])},null,2)])]),e("td",null,[_(n,{icon:["fas","pen-to-square"],size:"2xl",onClick:$=>v(y.que_id),class:"editBtn"},null,8,["onClick"])])],2))),128))]),_(he,{addQueModalVisibility:u.value,onClose:i[2]||(i[2]=y=>u.value=!1),onNewQuestionAdded:l},null,8,["addQueModalVisibility"]),(d(),O(te,null,{default:L(()=>[Q.value?(d(),O(Ae,{key:0,editQueModalVisibility:Q.value,onClose:i[3]||(i[3]=y=>Q.value=!1),onQuestionEdited:l,que_id:a.value},null,8,["editQueModalVisibility","que_id"])):Y("",!0)]),_:1}))])])}}},ns=P(ts,[["__scopeId","data-v-e65e8937"]]);export{ns as default};
