import{r as l,L as B,o as Q,P as u,a as S,b as o,c as r,d as e,w as P,v as A,m as a,h,n as c,T as R,g as z,q as M,F as $,e as E,s as C,t as g,f as k}from"./index-a84fb00c.js";import{S as F,A as w}from"./SearchComp-7673306b.js";const G={class:"admin-wrapper"},O={class:"mainAdmin"},W={class:"title"},j=e("h1",null,"Admin Panel - All Users",-1),H={key:0},I={key:1},J={class:"guide"},K=e("h3",null,"Managing Users",-1),X=e("ul",null,[e("li",null,' Delete: Toggle the switch next to a user in "Deleted" column to delete their account. '),e("li",null,' Promote: Toggle the switch next to a user in "Admin" column to elevate a user to admin status. ')],-1),Y=e("h3",null,"Searching Users",-1),Z=e("ul",null,[e("li",null," Use the search bar to filter users by name, username, or email. ")],-1),ee=e("h3",null,"Quick Navigation",-1),se=e("ul",null,[e("li",null," Click 'Categories Panel' or 'Questions Panel' at the top right to manage quizzes. ")],-1),te=[K,X,Y,Z,ee,se],ne={class:"searchResults"},ae=e("tr",null,[e("th",{class:"no-wrap"}),e("th",null,"Name"),e("th",null,"Username"),e("th",null,"Email"),e("th",null,"Deleted"),e("th",null,"Admin")],-1),le={class:"no-wrap",style:{"white-space":"nowrap"}},oe={class:"center"},ce={class:"switch"},ie=["checked","onChange","id","disabled"],re={class:"center"},de={class:"switch"},ue=["checked","onChange","id","disabled"],he={key:1},_e=e("td",{colspan:"6"}," Oops! We couldn't find any results for that term. Please try a different keyword or phrase. ",-1),me=[_e],pe=6,ve=7,fe=8,ge=16,ke=10,Pe={__name:"AdminView",setup(we){const U=l(!1),y=l(!1),b=l(!1),x=l(!1),D=l(!1);B.getUser().rol_name;let _=B.id();const i=l([]),T=l("Type in to search..."),m=l(!1);async function V(n){if(n.trim().length<1){await p();return}try{const t=await w.searchUsers(n.trim());i.value=t.data.searchDB}catch(t){console.error(t.message)}}async function p(){try{const n=await w.getAllUsers();i.value=n.data.users}catch(n){console.error(n.message)}}async function L(n){try{const t=await w.switchAdmin(n);p()}catch(t){console.error(t)}}async function N(n){try{const t=await w.switchDelete(n);p()}catch(t){console.error(t)}}return Q(async()=>{await p(),U.value=u.checkPermission(pe),y.value=u.checkPermission(ve),b.value=u.checkPermission(fe),x.value=u.checkPermission(ge),D.value=u.checkPermission(ke)}),(n,t)=>{const v=S("font-awesome-icon"),f=S("RouterLink");return o(),r("div",G,[e("div",O,[e("div",W,[j,e("div",null,[P(a(f,{to:{name:"questions"}},{default:h(()=>[e("div",null,[c(" Questions Panel "),a(v,{icon:["fas","arrow-right-long"]})])]),_:1},512),[[A,x.value]]),P(a(f,{to:{name:"categories"}},{default:h(()=>[e("div",null,[c(" Categories Panel "),a(v,{icon:["fas","arrow-right-long"]})])]),_:1},512),[[A,D.value]])])]),e("h2",{onClick:t[0]||(t[0]=s=>m.value=!m.value)},[c(" User Management Quick Guide "),m.value===!1?(o(),r("span",H,[c(" (click to unhide) "),a(v,{icon:["far","eye"]})])):(o(),r("span",I,[c(" (click to hide) "),a(v,{icon:["far","eye-slash"]})]))]),a(R,{name:"fade"},{default:h(()=>[P(e("div",J,te,512),[[A,m.value]])]),_:1}),U.value?(o(),z(F,{key:0,onSearchTerm:V,placeholder:T.value},null,8,["placeholder"])):M("",!0)]),e("div",ne,[e("table",null,[ae,i.value.length?(o(!0),r($,{key:0},E(i.value,(s,d)=>(o(),r("tr",{key:d,class:C({grey:d%2})},[e("td",le,g(d+1)+".",1),e("td",null,[a(f,{to:{name:"profile-details",params:{id:s.usr_id}}},{default:h(()=>[c(g(s.usr_fullname),1)]),_:2},1032,["to"])]),e("td",null,[a(f,{to:{name:"profile-details",params:{id:s.usr_id}}},{default:h(()=>[c(g(s.usr_username),1)]),_:2},1032,["to"])]),e("td",null,g(s.usr_email),1),e("td",oe,[e("label",ce,[e("input",{checked:s.usr_is_deleted!==null,onChange:q=>N(s.usr_id),type:"checkbox",id:i.value.length+d,disabled:k(_)===s.usr_id||!y.value},null,40,ie),e("span",{class:C(["slider",{disabledBtn:k(_)===s.usr_id||!y.value}])},null,2)])]),e("td",re,[e("label",de,[e("input",{checked:s.rol_name==="Admin",onChange:q=>L(s.usr_id),type:"checkbox",id:i.value.length*2+d,disabled:k(_)===s.usr_id||!b.value},null,40,ue),e("span",{class:C(["slider",{disabledBtn:k(_)===s.usr_id||!b.value}])},null,2)])])],2))),128)):(o(),r("tr",he,me))])])])}}};export{Pe as default};
